<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Save The Forest</title>

  <!-- Meta / Icons (optional: add your own assets) -->
  <meta name="theme-color" content="#319175" />
  <link rel="icon" href="/assets/ramo-favicon.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <noscript>
    <div class="card" style="margin:16px">This game requires JavaScript to run.</div>
  </noscript>

  <!-- Header / HUD -->
  <header>
    <div class="title">Save The Forest<span id="season">Year 1 Â· Period 1</span>
    </div>
    <div class="hud" role="status" aria-live="polite">
      <span class="pill" id="pillForest">ğŸŒ² Forest: <b id="statForest">-</b></span>
      <span class="pill" id="pillFood">ğŸŒ¾ Food: <b id="statFood">-</b></span>
      <span class="pill" id="pillComm">ğŸ’° Community: <b id="statComm">0</b></span>
      <span class="pill">ğŸ’¼ Treasury: <b id="statMoney">50</b></span>
      <span class="pill">ğŸ›ï¸ Gov: <b id="statGov">3</b></span>
      <span class="pill">ğŸ«± Social: <b id="statSoc">3</b></span>
      <span class="pill" id="pillER">ğŸ§¾ ER: <b id="statER">off</b></span>
    </div>
  </header>

<!-- App -->
  <main class="app" id="app" role="main">
    <!-- Left Sidebar -->
    <aside class="left">
      <section class="card" aria-labelledby="sim-title">
        <h3 id="sim-title">âš™ï¸ Simulation</h3>
        <label for="ticksPer">Ticks / period</label>
        <div>
          <input id="ticksPer" type="range" min="4" max="20" value="8" aria-describedby="ticksLbl" />
          <span id="ticksLbl">8</span>
        </div>
        <label for="spawnRate">Spawn rate (ğŸ‘¶)</label>
        <div>
          <input id="spawnRate" type="range" min="0" max="10" value="2" aria-describedby="spawnLbl" />
          <span id="spawnLbl">2</span>
        </div>
        <div class="actions" aria-label="Simulation actions">
          <button type="button" class="btn" id="btnTick">â–¶ï¸ Tick</button>
          <button type="button" class="btn good" id="btnRun">â© Run period</button>
          <button type="button" class="btn warn" id="btnCouncil">ğŸ—³ï¸ Open Council</button>
        </div>
      </section>

      <section class="card" aria-labelledby="tools-title">
        <h3 id="tools-title">ğŸ§° Click Tools (each costs capital)</h3>
        <div class="tool-list">
          <button type="button" class="btn good" id="toolFirebreak" aria-pressed="false">ğŸš§ Toggle Firebreak (ğŸ’°1/tile)</button>
          <button type="button" class="btn good" id="toolReplant" aria-pressed="false">ğŸŒ± Replant Cleared (ğŸ’°2/tile)</button>
          <button type="button" class="btn good" id="toolGuardian">ğŸ§‘â€ğŸŒ± Spawn Guardian (ğŸ’°10 â†’ +1ğŸ«±)</button>
          <button type="button" class="btn" id="toolProtect" aria-pressed="false">ğŸ›¡ï¸ Protect Tile (ğŸ«±2 upfront + ğŸ’°1/period)</button>
          <button type="button" class="btn" id="toolInspect" aria-pressed="false">ğŸ” Inspect</button>
        </div>
        <p class="hint">Click a tool to toggle it <em>on</em>. Click again to turn it off.</p>
      </section>

      <section class="card" aria-labelledby="legend-title">
        <h3 id="legend-title">ğŸ“œ Legend</h3>
        <div class="legend" aria-label="Legend">
          <span>ğŸŒ² Forest</span><span>ğŸªµ Edge</span><span>ğŸŸ« Cleared</span><span>ğŸŒ¾ Farm</span><span>ğŸ”¥ Char</span><span>ğŸš§ Firebreak</span>
          <span>ğŸ˜ï¸ Village</span><span>ğŸ  Hut</span><span>ğŸŒ± Replant</span><span>ğŸ§‘â€ğŸŒ± Guardian</span><span>ğŸ›¡ï¸ Protected</span><span>ğŸ”¥ Fire (wild)</span>
        </div>
      </section>

      <section class="card" aria-labelledby="goals-title">
        <h3 id="goals-title">ğŸ¯ Goals</h3>
        <p class="hint">Lose if ğŸŒ² &lt;20% or ğŸŒ¾ &lt;30% for 3 consecutive periods. Win: keep ğŸŒ² &gt;40% after 10 years with growing ğŸ’° community.</p>
      </section>

      <section class="card" aria-labelledby="tests-title">
        <h3 id="tests-title">ğŸ§ª Tests</h3>
        <div class="hint" id="testbar">Will run on loadâ€¦</div>
      </section>
    </aside>

    <!-- Center + Right -->
    <section class="right">
      <div class="boardWrap">
        <div id="board" class="board" role="grid" aria-label="Game board"></div>

        <!-- Fixed right panel -->
        <div class="sidepanel">
          <section class="card" aria-labelledby="summary-title">
            <h3 id="summary-title">ğŸ“ˆ Period Summary</h3>
            <div id="summary">â€”</div>
          </section>

          <section class="card" aria-labelledby="trends-title">
            <h3 id="trends-title">ğŸ“Š Trends (last 80 periods)</h3>
            <canvas id="trend" width="520" height="180" aria-label="Trends chart"></canvas>
            <p class="hint">Tracks: Forest %, Food %, Community money, Population.</p>
          </section>

          <section class="card" aria-labelledby="log-title">
            <h3 id="log-title">ğŸ§¾ Emoji Step Log</h3>
            <div class="log" id="log" aria-live="polite"></div>
          </section>
        </div>
      </div>
    </section>
  </main>

  <!-- Council Modal -->
  <div class="modal" id="councilModal" role="dialog" aria-modal="true" aria-labelledby="council-title">
    <div class="dialog">
      <h2 id="council-title">ğŸ›ï¸ Period Council â€” Interventions (spend capitals)</h2>

      <div class="council">
        <div class="card" style="margin:0">
          <b>ğŸ“œ Land Tenure</b>
          <div class="hint">Cost: ğŸ›ï¸2 + ğŸ«±1. Enables consolidation & value chains.</div>
          <button type="button" class="btn" data-action="tenure">Launch</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸŒ¾ Value Chains</b>
          <div class="hint">Cost: ğŸ«±2 + ğŸ’°25. Convert 3 ğŸ‘¨â€ğŸŒ¾ to high-value farmers.</div>
          <button type="button" class="btn" data-action="valueChains">Introduce</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸŒ¾ Consolidate Farms</b>
          <div class="hint">Cost: ğŸ«±2 + ğŸ›ï¸1. Requires Tenure.</div>
          <button type="button" class="btn" data-action="consolidate">Apply</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸ§‘â€ğŸŒ± Guardians (x3)</b>
          <div class="hint">Cost: ğŸ’°40. Patrol, replant, fight fires, deter.</div>
          <button type="button" class="btn" data-action="guardians">Hire</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸš§ Firebreak Network</b>
          <div class="hint">Cost: ğŸ’°25 + ğŸ«±1. Slows edge/fire spread.</div>
          <button type="button" class="btn" data-action="firebreaks">Build</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸ’µ Pay-to-Not-Cut (ER)</b>
          <div class="hint">Cost: ğŸ’°20. 30% fewer cuts next period. Earn 10ğŸ’° (+1ğŸ«±).</div>
          <button type="button" class="btn" data-action="er">Start</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸŒ± Replanting Drive</b>
          <div class="hint">Cost: ğŸ’°30. Convert 8 ğŸŸ« â†’ ğŸŒ± â†’ ğŸŒ² (+15ğŸ’° later).</div>
          <button type="button" class="btn" data-action="replantDrive">Plant</button>
        </div>
        <div class="card" style="margin:0">
          <b>ğŸ§‘â€ğŸ’¼ Entrepreneur Shift</b>
          <div class="hint">Cost: ğŸ’°20. 1 ğŸ§‘â€ğŸ’¼ funds guardians instead of cutters.</div>
          <button type="button" class="btn" data-action="entShift">Persuade</button>
        </div>
      </div>

      <div class="actions">
        <button type="button" class="btn" id="closeCouncil">Done</button>
      </div>
    </div>
  </div>

  <script src="/game.js" defer></script>
</body>
</html>
